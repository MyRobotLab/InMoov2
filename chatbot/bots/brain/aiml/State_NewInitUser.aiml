<?xml version="1.0" encoding="UTF-8"?>
<aiml>

  <category>
    <pattern>NewInitUser</pattern>
    <template>
      <think>
        <set name="newinituser">started</set>
      </think>
      <think>
        <set name="topic">newinituser</set>
      </think> I am listening. What name would you like
      me to memorise ?</template>
  </category>

  <topic name="NEWINITUSER">
    <category>
      <pattern>#</pattern>
      <that># YOU LIKE ME TO MEMORISE #</that>
      <template>
        <set name="questionnewinituser">if your new name is <star /> , say yes or no or stop</set>
        <think>
          <set name="tmpname">
            <star />
          </set>
        </think>
      </template>
    </category>

    <category>
      <pattern># YES #</pattern>
      <that># IF YOUR NEW NAME IS #</that>
      <template>
        <think>
          <set name="newinituser"></set>
          <set name="topic">changing user name</set>
        </think>
        <oob>
          <mrl>
            <service>python</service>
            <method>exec</method>
            <param>YesName(u"<get name="tmpname" /> "), i01_chatBot.startSession(u"<get
                name="tmpname" /> "), i01_chatBot.setPredicate(u"<get name="tmpname" />
              ","firstname",u"<get name="tmpname" /> "), i01_chatBot.setPredicate(u"<get
                name="tmpname" /> ","name",u"<get name="tmpname" /> "), i01_chatBot.setPredicate(u"<get
                name="tmpname" /> ","botname",u"<get name="botname" /> "),
              i01_chatBot.setPredicate(u"human","lastUsername","u<get name="tmpname" /> "),
              i01_chatBot.savePredicates()</param>
          </mrl>
        </oob>
        <random>
          <li>I am glad to know you, <get name="tmpname" /> .</li>
          <li>Nice to meet you, <get name="tmpname" /> .</li>
        </random>
      </template>
    </category>

    <category>
      <pattern># NO #</pattern>
      <that># IF YOUR NEW NAME IS #</that>
      <template>Let's restart.
        I am listening. What would you like to change your name to ?</template>
    </category>

    <category>
      <pattern># STOP #</pattern>
      <that># IF YOUR NEW NAME IS #</that>
      <template>Ok I keep your name <get name="name" />
      </template>
    </category>
  </topic>

</aiml>